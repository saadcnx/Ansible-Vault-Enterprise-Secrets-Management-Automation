---
- name: Production Deployment
  hosts: local
  vars_files:
    - ../vault_files/production_secrets.yml
  tasks:
    - name: Production deployment notice
      debug:
        msg: "Deploying to production database: {{ db_name }}"
    
    - name: Create production monitoring config
      copy:
        content: |
          # Production Monitoring Configuration
          MONITOR_API_KEY={{ monitoring_api_key }}
          ALERT_WEBHOOK={{ alert_webhook }}
          DB_HOST={{ db_host }}
          DB_NAME={{ db_name }}
        dest: /tmp/production_monitoring.conf
        mode: '0600'
    
    - name: Verify production config
      debug:
        msg: "Production monitoring configured with API key length: {{ monitoring_api_key | length }}"
